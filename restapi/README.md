# REST API for CRISTAL [![Build Status](https://travis-ci.org/cristal-ise/restapi.svg?branch=master)](https://travis-ci.org/cristal-ise/restapi)

This is the start of a JAX-RS wrapper for the CRISTAL Client API as specified on the [Google Doc](https://docs.google.com/document/d/1jAJyETl-iFbNXvrWa7FJLGi4mu1vEmAZNGlKlQ1I4X8/edit?usp=sharing)

The included Main may be invoked as a CRISTAL Client with -conf and -connect parameters, and will launch a Jersey http server on the URI specified in the CRISTAL property 'REST.URI', which defaults to http://localhost:8081/.

Usage of this API requires a login cookie generated by /login. You can disable this by setting the boolean CRISTAL property `REST.requireLoginCookie` to false. 

# Trying it out with curl

Some useful example curl commands:

* `curl -c cookies.txt http://{host:port}/login?user={user}&pass={pass}`
  * *get a login cookie and store it in the local file cookies.txt*
* `curl -b cookies.txt http://{host:port}/domain`
  * *get root listing of the item directory*
* `curl -b cookies.txt -X OPTIONS -D - http://pcuwe04:8081/item/{uuid}/`
  * *list jobs available in the given item for the logged in user*
* `curl -b cookies.txt -H "Content-Type: text/xml" -X POST -d '<NewDevObjectDef><ObjectName>SchemaFromRest</ObjectName><SubFolder/></NewDevObjectDef>' -D - http://pcuwe04:8081/item/{uuid of SchemaFactory}/workflow/domain/CreateNewSchema?done`
  * *create a new Schema by executing the 'CreateNewSchema' activity of the CristalDev SchemaFactory item.*
 
 