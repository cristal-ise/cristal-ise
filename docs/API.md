# The CRISTAL-ISE Client API

CRISTAL-ISE is a system that manages [description-driven](../Description-driven Systems) objects, known as [Item](../Item)s. These are objects that gain all of their application-specific behaviour through configuration, rather than compiled code. This configuration data, known as '[Descriptions](../Description)' comprises of DAG-oriented [workflow](../Workflow) definitions, [XML Schemas](../OutcomeDescriptions) and [script](../Script) fragments, which interact to provide the full lifecycle of the Item they are describing. In CRISTAL, the description data is also stored in other Items, which are also described using the same mechanism. This means that CRISTAL can store previous versions of descriptions, so that previous states of the system are preserved, and full provenance of both the application and its data are completely preserved.

CRISTAL-ISE allows for three types of process:

* Server - a server process is where Items are managed. They are instantiated, their workflows are orchestrated, and outcomes and other data are written to them. They do not function as CRISTAL Agent implementations. and so they do not perform any of the work that generates those outcomes: the only user-generated code that is executed in a server is to decide which branch of a workflow to follow in the event of a fork (OR, XOR, LOOP splits). Item and Agent IORs point to a server's CORBA endpoint. Servers are authenticated against LDAP servers as root rather than as a specific CRISTAL Agent.
* Client - these processes authenticate against a CRISTAL Agent, perform work as that Agent's implementation, and recording that work and any data generated by submitting completed Jobs to the Item that required the work. They interact with servers by locating Items and Agents, retrieving data from them, querying Jobs from Items and executing those Jobs by filling in the Outcome and requesting the transition. During the execution process, the Agent will execute any Scripts associated with the selected Activity, which may modify the outcome or otherwise change the Item's state by interacting with Predefined Steps in the its workflow.
* Shared clients - these processes function as clients, but for many agents instead of just one. They forward the functionality of item browsing and job execution to some external Agent implementation.  An example would be a web server process, which can accept connections from many users via web browsers at the same time. 

When we refer to the 'CRISTAL-ISE API' this refers to the client functionality, as the server code should not be modified by end users or developers. As an expansion of the above, client functionality breaks down into five areas:

1. [Authentication](../Authentication)
1. [Item directory browsing and resolution](../ResolvingEntities)
1. [Item data access](../QueryingEntityData)
1. [Obtaining and Executing Jobs to submit new Outcomes](../JobExecution)
1. [Changing the state of an Item during execution](../InteractingWithPredefinedSteps)

# CRISTAL Process Structure

This section details the objects that are created during CRISTAL process creation, and how to interact with them.

## Gateway

_Singletons that CRISTAL processes use to find and communicate with Items_

1.  [Properties](../ObjectProperties) - Cristal process configuration properties. Origin, usage and standard sets.
1.  [Lookup](../Lookup) - Item and Agent Directory. Paths and resolution.
1.  [TransactionManager](../ClusterStorageManager#TransactionManager) - Persistency of Cristal local objects.
1.  [ProxyManager](../ProxyManager) - Client proxies to cristal Items and Agents.
1.  [ModuleManager](../ModuleManager) - Loads, imports and initializes CRISTAL modules, which supply additional functionality through bundled Items.
1.  [ResourceLoader](../ResourceLoader) - loads Java resources from the kernel or Module jars.
1.  [CastorXMLUtility](../CastorXMLUtility) - Mapping between Cristal local objects and Schema described XML fragments using the kernel mapfiles.

_Server only singletons_

1. [LookupManager](../LookupManager) - writes to the Item and Agent directory.
1. [ProxyServer](../ProxyServer) - manages client Item subscriptions, and informs them of changes to Items.
1. [CorbaServer](../CorbaServer) - creates and manages Item objects as they are invoked over CORBA.

## Modules

_Bundles of Items that add functionality to a kernel instance_

1. [ModuleStructure](../ModuleStructure) - the file format and structure of a module.
1. [ModuleXML](../ModuleXML) - structure and syntax of the module xml specification.
1. [ModuleItem](../ModuleItem) - representation of a module as a Cristal Item.

## Bootstrap

_Read the Items of the modules and instantiate or update them to initialize the application_

1. [Boot-Sequence-of-Server](../Boot-Sequence-of-Server) - sequence of events involved in starting a CRISTAL server process

# CRISTAL-iSE Building Blocks

## Properties
_The venerable key-value pair is used heavily to achieve flexibility_

1. [PropertyDescription](../PropertyDescription) - Properties that describe Item 'types' 
1. [Property](../Property) - Properties of Item itself
1. [VertexProperty](../VertexProperty) - Properties used in activities and collections

## [LifeCycle](../Workflow)
_LifeCycle defines and execute the business logic implemented by the Item_

1. [PredefinedStep](../PredefinedStep) - built-in activities that execute code on the server to modify the fundamental aspects of the Item
1. [Activity](../Activity) - represents a task that needs to be done by an Agent
1. [State-Machine](../State-Machine) - defines the possible transition available to execute an Activity
1. [Job](../Job) -  represents a possible transition by a particular Agent of an Activity

## Collections|Collection
_Collections declare relationships between Items_

1. [Dependency](../Dependency) - Most basic collection type to reference Items
1. [Aggregation](../Aggregation) - Composition a fixed number of Item, which are individually typed
1. [CollectionDescription](../CollectionDescription) - Defines collection instances to be created (Dependency/Aggregation)

## Scripting
_Interacting with Items in activity, routing and instantiation scripts_

1. [Script](../Script)
1. [Instantiation Script](../Instantiation-Script)

## Proxies
_Proxies client-side representation of Items and Agent, they are the primary tool for application developers._

1. [ItemProxy](../ItemProxy) - Wrapper of the communication with [Item](../Item).
1. [AgentProxy](../AgentProxy) - Subclass of ItemProxy, has utility methods for [Job Execution](../JobExecution).
1. [Caching](../Proxies#caching) - ItemProxy caches data loaded from the Item to reduce communication.

## Graph
_Library to support graph representation within the framework_

1. [Renderer](../Renderer) - Renders the graph on Graphics2D canvas of AWT so it can be shown as PNG or SVG
